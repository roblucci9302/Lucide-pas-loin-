# Lucide Self-Hosted Configuration
# Copy this file to .env and fill in your values

# ============================================================================
# DOMAIN & PORTS
# ============================================================================

# Your domain name (for HTTPS setup)
DOMAIN=lucide.company.com

# Ports (change if needed)
HTTP_PORT=80
HTTPS_PORT=443
BACKEND_PORT=3001
GATEWAY_PORT=3002

# CORS Origins (comma-separated, no spaces)
CORS_ORIGIN=https://lucide.company.com,http://localhost:3000

# ============================================================================
# DATABASE (PostgreSQL)
# ============================================================================

POSTGRES_DB=lucide
POSTGRES_USER=lucide
POSTGRES_PASSWORD=CHANGE_THIS_SECURE_PASSWORD_123

# Connection string (auto-generated from above)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# ============================================================================
# SUPABASE (Cloud Sync)
# ============================================================================
# Get these from https://app.supabase.com

SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_KEY=your-service-role-key-here

# ============================================================================
# JWT AUTHENTICATION
# ============================================================================
# Generate with: openssl rand -base64 32

JWT_SECRET=CHANGE_THIS_TO_RANDOM_STRING_AT_LEAST_32_CHARS
GATEWAY_JWT_SECRET=CHANGE_THIS_TO_ANOTHER_RANDOM_STRING_32_CHARS

# ============================================================================
# LLM CONFIGURATION (for Natural Language Queries)
# ============================================================================

LLM_PROVIDER=openai
LLM_API_KEY=sk-your-openai-api-key-here
LLM_MODEL=gpt-4o-mini

# ============================================================================
# REDIS (Optional - for caching)
# ============================================================================

REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD

# ============================================================================
# SECURITY SETTINGS
# ============================================================================

# Allow write queries to databases via gateway (DANGEROUS - keep false)
ALLOW_WRITE_QUERIES=false

# Enable audit logging
AUDIT_LOG_ENABLED=true

# Rate limiting (requests per minute)
RATE_LIMIT_MAX_REQUESTS=100

# ============================================================================
# LICENSE
# ============================================================================
# Contact sales for SELF_HOSTED license
# License must be imported via Lucide app or placed at:
# /var/lib/lucide/license.json (in Docker) or ~/.lucide/license.json (host)

LICENSE_TIER=SELF_HOSTED
LICENSE_KEY=your-base64-license-key-from-sales

# ============================================================================
# MONITORING (Optional)
# ============================================================================

# Enable performance metrics
ENABLE_METRICS=true

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Sentry DSN (for error tracking)
# SENTRY_DSN=https://your-sentry-dsn

# ============================================================================
# EMAIL (Optional - for notifications)
# ============================================================================

# SMTP settings
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=noreply@company.com

# ============================================================================
# BACKUP (Optional)
# ============================================================================

# S3-compatible backup storage
# BACKUP_ENABLED=true
# BACKUP_S3_ENDPOINT=s3.amazonaws.com
# BACKUP_S3_BUCKET=lucide-backups
# BACKUP_S3_ACCESS_KEY=your-access-key
# BACKUP_S3_SECRET_KEY=your-secret-key
# BACKUP_SCHEDULE=0 2 * * * # Daily at 2 AM

# ============================================================================
# ADVANCED
# ============================================================================

# Node environment
NODE_ENV=production

# Max file upload size (MB)
MAX_UPLOAD_SIZE=100

# Session timeout (days)
SESSION_TIMEOUT=7

# Database connection pool
DB_POOL_MIN=2
DB_POOL_MAX=10

# Gateway query timeout (ms)
QUERY_TIMEOUT=30000
